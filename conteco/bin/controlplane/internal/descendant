#!/usr/bin/env bash
imageName="$(echo "$1" | cut -d'|' -f 1)"
prefix="$(echo "$1" | cut -d'|' -f 2)"
component="$(echo "$1" | cut -d'|' -f 3)"
shift
for folder in $imageName/$prefix$component*
do
  if [[ -d $folder ]] ;  then
    folderName="$(basename $folder)"
    if [[ "$folderName" != "_"* ]] ; then
      childComponent="$component$folderName"
      $@ $childComponent $imageName
    fi
  fi
done
